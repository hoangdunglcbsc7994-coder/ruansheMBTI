<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MBTI 人格类型测试 (升级版)</title>
    
    <!-- CSS 代码 -->
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #f0f2f5;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px 0;
        }

        .container {
            background: #ffffff;
            padding: 30px 40px;
            border-radius: 12px;
            box-shadow: 0 4px M12px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 700px;
            transition: all 0.3s ease;
        }

        h1, h2, h3 {
            text-align: center;
            color: #1a2a4d;
        }

        h1 { margin-bottom: 30px; }
        h2 { margin-bottom: 20px; }
        h3 { 
            text-align: left;
            margin-top: 30px;
            border-bottom: 2px solid #007bff;
            padding-bottom: 5px;
            color: #007bff;
        }

        .question-block {
            margin-bottom: 25px;
            border-left: 3px solid #007bff;
            padding-left: 15px;
        }

        .question-block p {
            font-weight: bold;
            margin-bottom: 10px;
        }

        .options label {
            display: block;
            background-color: #f8f9fa;
            padding: 12px 15px;
            margin-bottom: 8px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s ease, box-shadow 0.2s ease;
            border: 1px solid #ddd;
        }

        .options label:hover { background-color: #e9ecef; }
        .options input[type="radio"] { margin-right: 10px; }

        button {
            display: block;
            width: 100%;
            padding: 15px;
            font-size: 16px;
            font-weight: bold;
            color: #fff;
            background-color: #007bff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.2s ease;
            margin-top: 20px;
        }

        button:hover {
            background-color: #0056b3;
            transform: translateY(-2px);
        }

        /* 结果区域样式 */
        #result-container { text-align: center; }

        #personality-type {
            font-size: 2.5em;
            font-weight: bold;
            color: #007bff;
            margin: 0;
        }

        #personality-title {
            font-size: 1.5em;
            color: #555;
            margin-top: 5px;
            margin-bottom: 20px;
        }

        #personality-description {
            font-size: 1.1em;
            line-height: 1.6;
            text-align: left;
        }
        
        /* 统计图表样式 */
        .stats-container {
            margin-top: 30px;
            border-top: 1px solid #eee;
            padding-top: 20px;
        }

        .stat-row {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            font-size: 0.9em;
        }

        .stat-label {
            width: 15%;
            text-align: right;
            padding-right: 10px;
            font-weight: bold;
        }

        .stat-bar-container {
            width: 70%;
            display: flex;
            height: 25px;
            border-radius: 5px;
            overflow: hidden;
            background-color: #e9ecef;
        }

        .stat-bar {
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: bold;
            font-size: 0.8em;
            transition: width 1s ease-in-out;
        }

        .bar-a { background-color: #007bff; }
        .bar-b { background-color: #28a745; }

        /* 详细介绍样式 */
        .details-section { text-align: left; }
        .details-section ul {
            list-style-type: '✓ ';
            padding-left: 20px;
            line-height: 1.8;
        }
        .details-section .detail-p {
             line-height: 1.8;
             padding-left: 20px;
        }

        #restart-btn {
            background-color: #6c757d;
        }
        #restart-btn:hover { background-color: #5a6268; }

        .hidden { display: none; }
    </style>
</head>
<body>
    <div class="container">
        <h1>MBTI 人格类型测试</h1>
        <form id="mbti-form">
            <div id="test-container">
                <!-- 问题将由 JavaScript 动态加载 -->
            </div>
            <button type="submit" id="submit-btn">查看结果</button>
        </form>
        <div id="result-container" class="hidden">
            <p id="personality-type"></p>
            <p id="personality-title"></p>
            <p id="personality-description"></p>

            <div id="stats-container" class="stats-container">
                <!-- 统计图表将由 JavaScript 动态加载 -->
            </div>

            <div id="details-container" class="details-section">
                 <!-- 详细介绍将由 JavaScript 动态加载 -->
            </div>

            <button id="restart-btn">重新测试</button>
        </div>
    </div>
    
    <!-- JavaScript 代码 -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const questions = [
                // EI Dimension (外向/内向)
                { q: "在社交聚会后，你通常感觉？", a: "精力充沛", b: "筋疲力尽", d: "EI" },
                { q: "你更喜欢？", a: "与许多人进行轻松的交流", b: "与少数人进行深入的交谈", d: "EI" },
                { q: "在团队合作中，你倾向于？", a: "多说，引导讨论", b: "多听，在思考后发言", d: "EI" },
                // SN Dimension (实感/直觉)
                { q: "你更信任？", a: "你的实际经验", b: "你的灵感和想象", d: "SN" },
                { q: "你倾向于关注？", a: "事物的细节和现实", b: "事物的模式和可能性", d: "SN" },
                { q: "描述事物时，你更倾向于？", a: "具体和写实", b: "抽象和比喻", d: "SN" },
                // TF Dimension (思考/情感)
                { q: "做决定时，你更看重？", a: "逻辑、原则和公正", b: "人情、和谐与他人的感受", d: "TF" },
                { q: "你认为更糟糕的是？", a: "过于感情用事", b: "过于冷酷无情", d: "TF" },
                { q: "你更愿意被认为是？", a: "一个思维清晰的人", b: "一个富有同情心的人", d: "TF" },
                // JP Dimension (判断/感知)
                { q: "你的生活方式更倾向于？", a: "有条理，喜欢计划", b: "随性的，喜欢灵活", d: "JP" },
                { q: "对于任务，你更喜欢？", a: "在截止日期前尽早完成", b: "在压力下临近截止日期时完成", d: "JP" },
                { q: "度假时，你喜欢？", a: "详细规划好行程", b: "随心所欲，边走边看", d: "JP" }
            ];

            const personalityDetails = {
                "INTJ": { title: "建筑师", description: "富有想象力和战略性的思想家，万事皆有计划。", details: [{ t: "👍 优势", p: ["理性且逻辑性强", "善于战略规划", "独立自主，自信", "知识渊博，求知欲强"] }, { t: "👎 劣势", p: ["可能显得傲慢和不耐烦", "对情感表达和理解有困难", "有时会过于批判", "不喜规则和限制"] }, { t: "💼 适合的职业", p: ["科学家", "工程师", "律师", "系统分析师", "大学教授", "战略规划师"] }, { t: "❤️ 情感关系", p: "在关系中寻求智力上的匹配和深度。他们非常忠诚，但可能不善于表达情感。他们重视直接和诚实的沟通。" }] },
                "INTP": { title: "逻辑学家", description: "具有创造力的发明家，对知识有着止不住的渴望。", details: [{ t: "👍 优势", p: ["善于分析和抽象思考", "富有想象力和创造力", "思想开放，客观", "诚实直接"] }, { t: "👎 劣势", p: ["不善于处理情感", "有时会显得心不在焉", "容易自我怀疑", "不喜欢循规蹈矩"] }, { t: "💼 适合的职业", p: ["哲学家", "物理学家", "电脑程序员", "金融分析师", "建筑师", "数学家"] }, { t: "❤️ 情感关系", p: "他们希望伴侣能激发他们的思维。虽然不善于浪漫的表达，但他们以自己的方式深爱并忠于伴侣。" }] },
                "ENTJ": { title: "指挥官", description: "大胆，富有想象力且意志强大的领导者，总能找到或创造解决方法。", details: [{ t: "👍 优势", p: ["高效，精力充沛", "自信，意志坚定", "天生的领导者", "善于长远规划"] }, { t: "👎 劣势", p: ["固执，没有耐心", "可能显得傲慢和咄咄逼人", "处理情感问题比较困难", "冷酷无情"] }, { t: "💼 适合的职业", p: ["企业高管", "企业家", "律师", "项目经理", "政治家", "顾问"] }, { t: "❤️ 情感关系", p: "他们是关系中的主导者，寻求一个能与他们共同成长、同样有能力的伴侣。他们会努力推动关系向前发展。" }] },
                "ENTP": { title: "辩论家", description: "聪明，好奇的思想者，不会放弃任何一个智力上的挑战。", details: [{ t: "👍 优势", p: ["反应快，知识渊博", "有魅力，精力充沛", "善于头脑风暴", "不怕冲突和挑战"] }, { t: "👎 劣势", p: ["喜欢辩论，可能显得好斗", "对细节缺乏耐心", "容易厌倦，难以专注", "有时不够敏感"] }, { t: "💼 适合的职业", p: ["企业家", "律师", "顾问", "销售代表", "演员", "政治分析师"] }, { t: "❤️ 情感关系", p: "他们喜欢充满活力和智力挑战的关系。他们需要一个能跟上他们思维节奏并欣赏他们幽默感的伴侣。" }] },
                "INFJ": { title: "提倡者", description: "安静而神秘，但又富有启发性，是坚持不懈的理想主义者。", details: [{ t: "👍 优势", p: ["富有同情心和洞察力", "有创造力，有远见", "信念坚定，鼓舞人心", "寻求深刻的联系"] }, { t: "👎 劣势", p: ["对批评非常敏感", "有时过于理想化", "不愿敞开心扉", "容易耗尽心力"] }, { t: "💼 适合的职业", p: ["心理咨询师", "教师", "医生", "作家", "社会工作者", "艺术家"] }, { t: "❤️ 情感关系", p: "他们寻求一种深刻、有意义的灵魂伴侣关系。他们非常忠诚和体贴，但需要时间来建立信任。" }] },
                "INFP": { title: "调解者", description: "诗意，善良的利他主义者，总是准备着帮助一个好的事业。", details: [{ t: "👍 优势", p: ["富有同情心和理想主义", "思想开放，有创造力", "忠于自己的价值观", "有奉献精神"] }, { t: "👎 劣势", p: ["过于理想化，不切实际", "不喜欢处理数据和事实", "容易感到失落", "对批评敏感"] }, { t: "💼 适合的职业", p: ["作家", "艺术家", "心理学家", "教师", "非营利组织工作者", "设计师"] }, { t: "❤️ 情感关系", p: "他们是充满爱心和支持的伴侣，寻求一段与自己价值观相符的和谐关系。他们珍视情感上的亲密。" }] },
                "ENFJ": { title: "主人公", description: "富有魅力，鼓舞人心的领导者，有给听众带来好心情的能力。", details: [{ t: "👍 优势", p: ["有魅力，善于交际", "富有同情心，利他主义", "天生的领导者", "可靠，有责任心"] }, { t: "👎 劣势", p: ["过于理想化", "有时会控制欲过强", "在做决定时过于情绪化", "容易忽略自身需求"] }, { t: "💼 适合的职业", p: ["教师", "顾问", "人力资源经理", "销售主管", "公关专家", "教练"] }, { t: "❤️ 情感关系", p: "他们是热情而投入的伴侣，致力于帮助伴侣成长。他们渴望和谐，并会努力维系它。" }] },
                "ENFP": { title: "竞选者", description: "热情，有创造力，善于交际的自由精神，总能找到理由微笑。", details: [{ t: "👍 优势", p: ["充满好奇心和热情", "善于沟通", "富有想象力", "友好，平易近人"] }, { t: "👎 劣势", p: ["容易分心，难以完成任务", "容易感到压力", "过于情绪化", "不喜欢规则和官僚作风"] }, { t: "💼 适合的职业", p: ["记者", "演员", "公关", "治疗师", "活动策划", "政治家"] }, { t: "❤️ 情感关系", p: "他们寻求充满激情和可能性的关系。他们是富有表现力和深情的伴侣，但可能害怕承诺。" }] },
                "ISTJ": { title: "检查员", description: "实际，注重事实的个体，可靠性不容怀疑。", details: [{ t: "👍 优势", p: ["诚实正直", "意志坚强，有责任感", "冷静，务实", "非常有条理"] }, { t: "👎 劣势", p: ["固执，不灵活", "有时不够敏感", "总是遵循规则", "容易自责"] }, { t: "💼 适合的职业", p: ["会计师", "审计师", "公务员", "军官", "数据库管理员", "律师"] }, { t: "❤️ 情感关系", p: "他们以行动而非言语表达爱意。他们是极其忠诚和可靠的伴侣，会努力履行自己的承诺和责任。" }] },
                "ISFJ": { title: "保护者", description: "非常专注，温暖的保护者，总是准备着保护他们爱的人。", details: [{ t: "👍 优势", p: ["乐于助人，可靠", "有耐心，观察力强", "忠诚，勤奋", "善于支持他人"] }, { t: "👎 劣势", p: ["过于谦虚，不喜欢变化", "压抑自己的感受", "害怕冲突", "容易过劳"] }, { t: "💼 适合的职业", p: ["护士", "教师", "行政助理", "室内设计师", "客户服务代表", "图书管理员"] }, { t: "❤️ 情感关系", p: "他们是传统而忠诚的伴侣，非常重视家庭。他们会尽一切努力照顾伴侣的需求，创造一个温暖的家。" }] },
                "ESTJ": { title: "总经理", description: "出色的管理者，在管理事情或人员方面无与伦比。", details: [{ t: "👍 优势", p: ["专注，有奉献精神", "意志坚强", "直接诚实", "善于组织"] }, { t: "👎 劣势", p: ["不灵活，固执", "不善于表达情感", "喜欢评判他人", "难以放松"] }, { t: "💼 适合的职业", p: ["法官", "经理", "财务总监", "警察", "教练", "销售经理"] }, { t: "❤️ 情感关系", p: "他们视承诺为己任，是稳定可靠的伴侣。他们喜欢有秩序的家庭生活，并会为此努力工作。" }] },
                "ESFJ": { title: "执政官", description: "极受欢迎，总是热切地为他人提供帮助。", details: [{ t: "👍 优势", p: ["强烈的责任感", "忠诚，对他人敏感", "善于联系他人", "外向，热情"] }, { t: "👎 劣势", p: ["过于在乎社会地位", "不喜欢批评和冲突", "有时会控制欲过强", "需求他人的肯定"] }, { t: "💼 适合的职业", p: ["销售代表", "护士", "教师", "社工", "活动策划", "人力资源"] }, { t: "❤️ 情感关系", p: "他们是温暖、深情的伴侣，把伴侣的幸福放在首位。他们喜欢社交，并希望伴侣能分享他们的社交生活。" }] },
                "ISTP": { title: "工匠", description: "大胆，务实的实验家，是所有工具的使用大师。", details: [{ t: "👍 优势", p: ["乐观，精力充沛", "有创造力，动手能力强", "在危机中保持冷静", "随机应变"] }, { t: "👎 劣势", p: ["固执，容易厌倦", "不喜欢承诺", "喜欢冒险", "不善于表达情感"] }, { t: "💼 适合的职业", p: ["机械师", "工程师", "飞行员", "消防员", "程序员", "木工"] }, { t: "❤️ 情感关系", p: "他们活在当下，喜欢和伴侣一起探索新事物。他们需要大量的个人空间，不喜欢被束缚。" }] },
                "ISFP": { title: "艺术家", description: "灵活，有魅力的艺术家，总是准备着探索和体验新鲜事物。", details: [{ t: "👍 优势", p: ["富有魅力和想象力", "对美有敏锐的感受力", "热情，好奇", "忠于自己的价值观"] }, { t: "👎 劣势", p: ["非常独立，不可预测", "容易感到压力", "竞争性过强", "不善于长远规划"] }, { t: "💼 适合的职业", p: ["艺术家", "设计师", "音乐家", "厨师", "兽医", "理疗师"] }, { t: "❤️ 情感关系", p: "他们是温柔、随和的伴侣。他们通过共同的经历和行动来表达爱，而不是空洞的言语。" }] },
                "ESTP": { title: "企业家", description: "聪明，精力充沛，有敏锐的洞察力，享受生活在边缘。", details: [{ t: "👍 优势", p: ["大胆，理性务实", "有洞察力，善于社交", "直接，喜欢行动", "精力充沛"] }, { t: "👎 劣势", p: ["缺乏耐心，不够敏感", "喜欢冒险，藐视规则", "可能错过大局", "不善于结构化学习"] }, { t: "💼 适合的职业", p: ["销售", "营销", "警察/侦探", "急救人员", "企业家", "金融顾问"] }, { t: "❤️ 情感关系", p: "他们是充满激情和乐趣的伴侣，喜欢和伴侣一起享受刺激的活动。他们活在当下，可能害怕长期的承诺。" }] },
                "ESFP": { title: "表演者", description: "自发的，精力充沛，热情的表演者 - 他们周围的生活永不沉闷。", details: [{ t: "👍 优势", p: ["大胆，有原创性", "审美和表演能力强", "务实，善于观察", "人际交往能力出色"] }, { t: "👎 劣势", p: ["对批评敏感", "不喜欢冲突", "容易厌倦，难以专注", "不善于长远规划"] }, { t: "💼 适合的职业", p: ["演员", "艺术家", "设计师", "销售顾问", "活动策划", "导游"] }, { t: "❤️ 情感关系", p: "他们是慷慨、热情和有趣的伴侣。他们喜欢通过感官体验来分享爱，并会尽力让伴侣开心。" }] }
            };

            const testContainer = document.getElementById('test-container');
            const mbtiForm = document.getElementById('mbti-form');
            const resultContainer = document.getElementById('result-container');
            const personalityTypeEl = document.getElementById('personality-type');
            const personalityTitleEl = document.getElementById('personality-title');
            const personalityDescriptionEl = document.getElementById('personality-description');
            const statsContainerEl = document.getElementById('stats-container');
            const detailsContainerEl = document.getElementById('details-container');
            const restartBtn = document.getElementById('restart-btn');

            function renderQuestions() {
                let questionHTML = '';
                questions.forEach((q, index) => {
                    questionHTML += `
                        <div class="question-block">
                            <p>${index + 1}. ${q.q}</p>
                            <div class="options">
                                <label><input type="radio" name="q${index}" value="a" required> ${q.a}</label>
                                <label><input type="radio" name="q${index}" value="b" required> ${q.b}</label>
                            </div>
                        </div>
                    `;
                });
                testContainer.innerHTML = questionHTML;
            }

            mbtiForm.addEventListener('submit', function(event) {
                event.preventDefault();
                calculateResult();
            });

            restartBtn.addEventListener('click', function() {
                resultContainer.classList.add('hidden');
                mbtiForm.classList.remove('hidden');
                mbtiForm.reset();
                window.scrollTo(0, 0);
            });

            function calculateResult() {
                const scores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
                
                questions.forEach((q, index) => {
                    const selectedValue = document.querySelector(`input[name="q${index}"]:checked`).value;
                    const dimension = q.d;
                    if (selectedValue === 'a') {
                        scores[dimension[0]]++;
                    } else {
                        scores[dimension[1]]++;
                    }
                });

                let resultType = '';
                resultType += scores.E >= scores.I ? 'E' : 'I';
                resultType += scores.S >= scores.N ? 'S' : 'N';
                resultType += scores.T >= scores.F ? 'T' : 'F';
                resultType += scores.J >= scores.P ? 'J' : 'P';

                showResult(resultType, scores);
            }

            function renderStatistics(scores) {
                const dimensions = [
                    { a: 'E', b: 'I', label: '精力来源', nameA: '外向', nameB: '内向' },
                    { a: 'S', b: 'N', label: '认知方式', nameA: '实感', nameB: '直觉' },
                    { a: 'T', b: 'F', label: '决策依据', nameA: '思考', nameB: '情感' },
                    { a: 'J', b: 'P', label: '生活态度', nameA: '判断', nameB: '感知' }
                ];
                let statsHTML = '<h3>你的倾向占比</h3>';
                dimensions.forEach(dim => {
                    const scoreA = scores[dim.a];
                    const scoreB = scores[dim.b];
                    const total = scoreA + scoreB;
                    const percentA = Math.round((scoreA / total) * 100);
                    const percentB = 100 - percentA;

                    statsHTML += `
                        <div class="stat-row">
                            <div class="stat-label">${dim.nameA}</div>
                            <div class="stat-bar-container">
                                <div class="stat-bar bar-a" style="width: ${percentA}%;">${percentA}%</div>
                                <div class="stat-bar bar-b" style="width: ${percentB}%;">${percentB}%</div>
                            </div>
                            <div class="stat-label" style="text-align: left; padding-left: 10px; padding-right:0;">${dim.nameB}</div>
                        </div>
                    `;
                });
                statsContainerEl.innerHTML = statsHTML;
            }

            function renderDetails(type) {
                const data = personalityDetails[type];
                if (!data) return;

                let detailsHTML = '';
                data.details.forEach(section => {
                    detailsHTML += `<h3>${section.t}</h3>`;
                    if (Array.isArray(section.p)) {
                        detailsHTML += '<ul>';
                        section.p.forEach(point => {
                            detailsHTML += `<li>${point}</li>`;
                        });
                        detailsHTML += '</ul>';
                    } else {
                        detailsHTML += `<p class="detail-p">${section.p}</p>`;
                    }
                });
                detailsContainerEl.innerHTML = detailsHTML;
            }

            function showResult(type, scores) {
                const data = personalityDetails[type];

                mbtiForm.classList.add('hidden');
                resultContainer.classList.remove('hidden');
                
                if (data) {
                    personalityTypeEl.textContent = type;
                    personalityTitleEl.textContent = data.title;
                    personalityDescriptionEl.textContent = data.description;
                    renderDetails(type);
                } else {
                    personalityTypeEl.textContent = type;
                    personalityDescriptionEl.textContent = "暂无该类型的详细描述。";
                    detailsContainerEl.innerHTML = '';
                }

                renderStatistics(scores);
                window.scrollTo(0, 0);
            }

            // 初始化页面
            renderQuestions();
        });
    </script>
</body>
</html>